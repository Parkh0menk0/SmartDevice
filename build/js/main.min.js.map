{"version":3,"sources":["script.js"],"names":["ESC_KEYCODE","popup","document","querySelector","close","form","userName","isStorageSupport","storage","tel","onEscPress","evt","keyCode","closeModal","openModal","add","focus","addEventListener","classList","overlay","removeEventListener","remove","getItem","err","preventDefault","localStorage","value","contains"],"mappings":"AAAA,aAEA,IAAIA,YAAc,GAIdC,KAAKC,SAAWC,cAAR,wBAERC,MAAQH,SAAME,cAAc,UAE5BE,QAAOJ,SAAME,cAAN,kBACPG,MAAQL,MAAGA,cAAME,iBAGjBI,KAAAA,MAAAA,cAAJ,QACIC,SAAUP,MAAdE,cAAA,eAEAM,IAAAR,MAAAE,cAAA,cAHII,kBAAmB,EACnBC,QAAU,GAWb,SAAAE,WAAAC,GAEDA,EAAAC,UAAAZ,aAJIa,aAQJ,SAASC,YAIPb,MAAIO,UAASO,IAAA,cACXT,QAAAA,UAAAS,IAAiBP,cADnBA,SAIEF,SAASU,MAATR,QACDC,IAAAO,SAEDd,SAASe,QAATf,SAASe,iBAAiB,UAAWP,YASrCT,SAAMiB,aACNC,KAAAA,QACAjB,MAAAA,UAASkB,OAAAA,cACVD,QAAAD,UAAAG,OAAA,cADCnB,SAASkB,oBAAoB,UAAWV,YAKzC,IACCH,QAAAA,aAAmBe,QAAnB,QACD,MAAAC,GADChB,kBAAmB,EAKnBO,KAAAA,iBAAS,QAAA,SAAAH,GAFXA,EAAAa,iBAKApB,cAGCA,MAHDa,iBAAA,QAAA,SAAAN,GAKAN,EAAKY,iBACHJ,eAGER,KAAAY,iBAAIV,SAAkB,SAAAI,GACpBc,SAAAA,OAAAhB,IAAqBiB,MAL3BnB,kBAUAY,aAAQF,QAAiB,OAASX,SAAUK,OAJvCA,EAAAa,mBAQFL,QAAAF,iBAAA,QAAA,SAAAN,GAJHA,EAOAa,iBACAL,QAAAD,UAAAS,SAAA,eAEAd","file":"main.min.js","sourcesContent":["'use strict';\n\nvar ESC_KEYCODE = 27;\n\nvar link = document.querySelector('.btn--request-a-call');\n\nvar popup = document.querySelector('.modal');\nvar overlay = document.querySelector('.modal-overlay');\nvar close = popup.querySelector('.modal__close');\n\nvar form = popup.querySelector('form');\nvar userName = popup.querySelector('[name=name]');\nvar tel = popup.querySelector('[name=tel]');\n\nvar isStorageSupport = true;\nvar storage = '';\n\n/**\n * Функция для закрытия окна формы по нажатии клавиши Esc.\n * @function\n * @param {Object} evt объект события;\n */\nfunction onEscPress(evt) {\n  if (evt.keyCode === ESC_KEYCODE) {\n    closeModal();\n  }\n}\n\n/**\n * Функция открытия окна формы.\n * @function\n */\nfunction openModal() {\n  popup.classList.add('modal-show');\n  overlay.classList.add('modal-show');\n\n  if (storage) {\n    userName.value = storage;\n    tel.focus();\n  } else {\n    userName.focus();\n  }\n\n  document.addEventListener('keydown', onEscPress);\n}\n\n/**\n * Функция закрытия окна формы.\n * @function\n */\nfunction closeModal() {\n  form.reset();\n  popup.classList.remove('modal-show');\n  overlay.classList.remove('modal-show');\n  document.removeEventListener('keydown', onEscPress);\n}\n\ntry {\n  storage = localStorage.getItem('name');\n} catch (err) {\n  isStorageSupport = false;\n}\n\nlink.addEventListener('click', function (evt) {\n  evt.preventDefault();\n  openModal();\n});\n\nclose.addEventListener('click', function (evt) {\n  evt.preventDefault();\n  closeModal();\n});\n\nform.addEventListener('submit', function (evt) {\n  if (!userName.value || !tel.value) {\n    evt.preventDefault();\n  } else {\n    if (isStorageSupport) {\n      localStorage.setItem('name', userName.value);\n    }\n  }\n});\n\noverlay.addEventListener('click', function (evt) {\n  evt.preventDefault();\n  if (overlay.classList.contains('modal-show')) {\n    closeModal();\n  }\n});\n\n// var pageHeader = document.querySelector('.page-header');\n// var headerToggle = document.querySelector('.page-header__toggle');\n\n// pageHeader.classList.remove('page-header--nojs');\n\n// headerToggle.addEventListener('click', function () {\n//   if (pageHeader.classList.contains('page-header--closed')) {\n//     pageHeader.classList.remove('page-header--closed');\n//     pageHeader.classList.add('page-header--opened');\n//   } else {\n//     pageHeader.classList.add('page-header--closed');\n//     pageHeader.classList.remove('page-header--opened');\n//   }\n// });\n"]}