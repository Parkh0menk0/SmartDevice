{"version":3,"sources":["script.js"],"names":["i","ESC_KEYCODE","popup","document","querySelector","close","form","userName","message","isStorageSupport","storage","name","accordion","tel","querySelectorAll","onEscPress","evt","keyCode","closeModal","add","focus","value","addEventListener","overlay","classList","remove","removeEventListener","err","localStorage","getItem","openModal","link","preventDefault","setItem","contains","length","panel","nextElementSibling","this","toggle","style","maxHeight","scrollHeight"],"mappings":"AAAA,aAEA,IAqBIA,EArBAC,YAAc,GAIdC,KAAKC,SAAWC,cAAR,gCAERC,MAAQH,SAAME,cAAc,UAE5BE,QAAOJ,SAAME,cAAN,kBACPG,MAAQL,MAAGA,cAAME,iBAEjBI,KAAON,MAAGA,cAAME,QAEhBK,SAAAA,MAAgBL,cAApB,eACIM,IAAAA,MAAUN,cAAA,cACZO,QADYT,MAAAE,cAAA,mBAGZI,kBAAS,EAHXE,QAAA,CAMAC,KAAIC,GACJC,IAAA,GAEAL,QAAA,IAHII,UAAYT,SAASW,iBAAiB,cAc1C,SAAAC,WAAAC,GALMA,EAAIC,UAAYhB,aAClBiB,aAYF,SAAIR,YACFH,MAAAA,UAAAY,IAAiBT,cACjBG,QAAIO,UAAJD,IAAA,cAEAZ,QAASa,MACVb,SAAAc,MAAAX,QAAAC,KAHCE,IAAIO,SAMJP,SAAAO,QAGAP,QAAAA,KACDA,IAAAQ,MAAAX,QAAAG,IAHCL,QAAQY,SAMRZ,IAAAA,QAGDE,QAAAF,QAHCA,QAAQa,MAAQX,QAAQF,QAM3BD,SAAAa,QADCjB,SAASmB,iBAAiB,UAAWP,YAUrCQ,SAAOL,aACPf,KAAAA,QACDD,MAAAsB,UAAAC,OAAA,cAFCF,QAAQC,UAAUC,OAAO,cAI3BtB,SAAIuB,oBAAA,UAAAX,YAGFL,IACAA,QAAOiB,KAAKC,aAAAC,QAAA,QACZpB,QAAAA,IAAAA,aAAAoB,QAAA,OACDnB,QAAAF,QAAAoB,aAAAC,QAAA,WAFC,MAAOF,GAITlB,kBAAU,EAuCNG,GApCAkB,MACDC,KAHDT,iBAAA,QAAA,SAAAN,GAIDA,EAAAgB,iBAFGF,cAOAZ,OACDb,MAHDiB,iBAAA,QAAA,SAAAN,GAIDA,EAAAgB,iBAFGd,eAOEF,MACDV,KAFDgB,iBAEO,SAAA,SAAAN,GACLT,SAAIE,OAAkBI,IAAAQ,MAGpBO,mBACDA,aAAAK,QAAA,OAAA1B,SAAAc,OACFO,aAAAK,QAAA,MAAApB,IAAAQ,OATHO,aAAAK,QAAA,UAAAzB,QAAAa,QAKMO,EAAAA,mBAQJL,SAGAA,QAAIA,iBAAkBW,QAAS,SAAAlB,GAC7BE,EAAAA,iBACDK,QAAAC,UAAAU,SAAA,eAJHhB,eAUEN,UACE,IAAAZ,EAAKwB,EAAAA,EAAAA,UAAiBW,OAAtBnC,IACAY,UAAIwB,GAAKd,iBAAQe,QAAjB,WADAC,KAAKd,UAAUe,OAAO,UAEtB,IAAIH,EAAMI,KAAMC,mBACdL,EAAMI,MAAMC,UADdL,EAEOI,MAAAC,UAAA,KAENL,EAAAI,MAAAC,UAAAL,EAAAM,aAAA","file":"main.min.js","sourcesContent":["'use strict';\n\nvar ESC_KEYCODE = 27;\n\nvar link = document.querySelector('.header__btn--request-a-call');\n\nvar popup = document.querySelector('.modal');\nvar overlay = document.querySelector('.modal-overlay');\nvar close = popup.querySelector('.modal__close');\n\nvar form = popup.querySelector('form');\nvar userName = popup.querySelector('[name=name]');\nvar tel = popup.querySelector('[name=tel]');\nvar message = popup.querySelector('[name=question]');\n\nvar isStorageSupport = true;\nvar storage = {\n  name: '',\n  tel: '',\n  message: ''\n};\n\nvar accordion = document.querySelectorAll(\".accordion\");\nvar i;\n\n/**\n * Функция для закрытия окна формы по нажатии клавиши Esc.\n * @function\n * @param {Object} evt объект события;\n */\nfunction onEscPress(evt) {\n  if (evt.keyCode === ESC_KEYCODE) {\n    closeModal();\n  }\n}\n\n/**\n * Функция открытия окна формы.\n * @function\n */\nfunction openModal() {\n  popup.classList.add('modal-show');\n  overlay.classList.add('modal-show');\n\n  if (storage.name) {\n    userName.value = storage.name;\n    tel.focus();\n  } else {\n    userName.focus();\n  }\n\n  if (storage.tel) {\n    tel.value = storage.tel;\n    message.focus();\n  } else {\n    tel.focus();\n  }\n\n  if (storage.message) {\n    message.value = storage.message;\n  } else {\n    userName.focus();\n  }\n\n  document.addEventListener('keydown', onEscPress);\n}\n\n/**\n * Функция закрытия окна формы.\n * @function\n */\nfunction closeModal() {\n  form.reset();\n  popup.classList.remove('modal-show');\n  overlay.classList.remove('modal-show');\n  document.removeEventListener('keydown', onEscPress);\n}\n\ntry {\n  storage.name = localStorage.getItem('name');\n  storage.tel = localStorage.getItem('tel');\n  storage.message = localStorage.getItem('message');\n} catch (err) {\n  isStorageSupport = false;\n}\n\nif (link) {\n  link.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    openModal();\n  });\n}\n\nif (close) {\n  close.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    closeModal();\n  });\n}\n\nif (form) {\n  form.addEventListener('submit', function (evt) {\n    if (!userName.value || !tel.value) {\n      evt.preventDefault();\n    } else {\n      if (isStorageSupport) {\n        localStorage.setItem('name', userName.value);\n        localStorage.setItem('tel', tel.value);\n        localStorage.setItem('message', message.value);\n      }\n    }\n  });\n}\n\nif (overlay) {\n  overlay.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    if (overlay.classList.contains('modal-show')) {\n      closeModal();\n    }\n  });\n}\n\nif (accordion) {\n  for (i = 0; i < accordion.length; i++) {\n    accordion[i].addEventListener(\"click\", function () {\n      this.classList.toggle(\"active\");\n      var panel = this.nextElementSibling;\n      if (panel.style.maxHeight) {\n        panel.style.maxHeight = null;\n      } else {\n        panel.style.maxHeight = panel.scrollHeight + \"px\";\n      }\n    });\n  }\n}\n"]}