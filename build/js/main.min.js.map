{"version":3,"sources":["script.js"],"names":["ESC_KEYCODE","popup","document","querySelector","close","form","userName","message","isStorageSupport","storage","name","tel","onEscPress","evt","keyCode","closeModal","openModal","add","focus","value","addEventListener","classList","overlay","removeEventListener","remove","localStorage","getItem","err","preventDefault","setItem","contains"],"mappings":"AAAA,aAEA,IAAIA,YAAc,GAIdC,KAAKC,SAAWC,cAAR,gCAERC,MAAQH,SAAME,cAAc,UAE5BE,QAAOJ,SAAME,cAAN,kBACPG,MAAQL,MAAGA,cAAME,iBAEjBI,KAAON,MAAGA,cAAME,QAEhBK,SAAAA,MAAgBL,cAApB,eACIM,IAAAA,MAAUN,cAAA,cACZO,QADYT,MAAAE,cAAA,mBAGZI,kBAAS,EAHXE,QAAA,CAMAC,KAAA,GAJEC,IAAK,GACLJ,QAAS,IAYV,SAAAK,WAAAC,GAEDA,EAAAC,UAAAd,aAJIe,aAQJ,SAASC,YAIPf,MAAIQ,UAAJQ,IAAkB,cAChBX,QAAAA,UAAAW,IAAiBR,cADnBA,QAGOC,MACLJ,SAASY,MAATT,QAAAC,KACDC,IAAAO,SAEDZ,SAAWY,QAAXT,QAGOE,KACLA,IAAIO,MAAJT,QAAAE,IACDJ,QAAAW,SAEDP,IAAIF,QAGFH,QAASY,QACVX,QAAAY,MAAAV,QAAAF,QAEDL,SAASkB,QAATlB,SAASkB,iBAAiB,UAAWR,YASrCX,SAAMoB,aACNC,KAAAA,QACApB,MAAAA,UAASqB,OAAAA,cACVD,QAAAD,UAAAG,OAAA,cADCtB,SAASqB,oBAAoB,UAAWX,YAKxCH,IACAA,QAAQF,KAARkB,aAAkBA,QAAaC,QAC/BjB,QAAOkB,IAAKF,aAAAC,QAAA,OACZlB,QAAAA,QAAgBiB,aAAhBC,QAAA,WACD,MAAAC,GADCnB,kBAAmB,EAKjBK,MACAG,KAAAA,iBAAS,QAAA,SAAAH,GAFXA,EAAAe,iBAIDZ,cAIGH,OACAE,MAAAA,iBAAU,QAAA,SAAAF,GAFZA,EAAAe,iBAIDb,eAIGV,MACEQ,KAAAA,iBAAA,SAAA,SAAAA,GADFP,SAEOa,OAAAR,IAAAQ,MAGHM,mBACAA,aAAaI,QAAQ,OAAAvB,SAAWC,OACjCkB,aAAAI,QAAA,MAAAlB,IAAAQ,OACFM,aAAAI,QAAA,UAAAtB,QAAAY,QALCN,EAAIL,mBAWNK,SADFS,QAAQF,iBAAiB,QAAS,SAAUP,GAE1CA,EAAIS,iBACFP,QAAUM,UAAAS,SAAA,eACXf","file":"main.min.js","sourcesContent":["'use strict';\n\nvar ESC_KEYCODE = 27;\n\nvar link = document.querySelector('.header__btn--request-a-call');\n\nvar popup = document.querySelector('.modal');\nvar overlay = document.querySelector('.modal-overlay');\nvar close = popup.querySelector('.modal__close');\n\nvar form = popup.querySelector('form');\nvar userName = popup.querySelector('[name=name]');\nvar tel = popup.querySelector('[name=tel]');\nvar message = popup.querySelector('[name=question]');\n\nvar isStorageSupport = true;\nvar storage = {\n  name: '',\n  tel: '',\n  message: ''\n};\n\n/**\n * Функция для закрытия окна формы по нажатии клавиши Esc.\n * @function\n * @param {Object} evt объект события;\n */\nfunction onEscPress(evt) {\n  if (evt.keyCode === ESC_KEYCODE) {\n    closeModal();\n  }\n}\n\n/**\n * Функция открытия окна формы.\n * @function\n */\nfunction openModal() {\n  popup.classList.add('modal-show');\n  overlay.classList.add('modal-show');\n\n  if (storage.name) {\n    userName.value = storage.name;\n    tel.focus();\n  } else {\n    userName.focus();\n  }\n\n  if (storage.tel) {\n    tel.value = storage.tel;\n    message.focus();\n  } else {\n    tel.focus();\n  }\n\n  if (storage.message) {\n    message.value = storage.message;\n  } else {\n    userName.focus();\n  }\n\n  document.addEventListener('keydown', onEscPress);\n}\n\n/**\n * Функция закрытия окна формы.\n * @function\n */\nfunction closeModal() {\n  form.reset();\n  popup.classList.remove('modal-show');\n  overlay.classList.remove('modal-show');\n  document.removeEventListener('keydown', onEscPress);\n}\n\ntry {\n  storage.name = localStorage.getItem('name');\n  storage.tel = localStorage.getItem('tel');\n  storage.message = localStorage.getItem('message');\n} catch (err) {\n  isStorageSupport = false;\n}\n\nif (link) {\n  link.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    openModal();\n  });\n}\n\nif (close) {\n  close.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    closeModal();\n  });\n}\n\nif (form) {\n  form.addEventListener('submit', function (evt) {\n    if (!userName.value || !tel.value) {\n      evt.preventDefault();\n    } else {\n      if (isStorageSupport) {\n        localStorage.setItem('name', userName.value);\n        localStorage.setItem('tel', tel.value);\n        localStorage.setItem('message', message.value);\n      }\n    }\n  });\n}\n\nif (overlay) {\n  overlay.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    if (overlay.classList.contains('modal-show')) {\n      closeModal();\n    }\n  });\n}\n\n// var pageHeader = document.querySelector('.page-header');\n// var headerToggle = document.querySelector('.page-header__toggle');\n\n// pageHeader.classList.remove('page-header--nojs');\n\n// headerToggle.addEventListener('click', function () {\n//   if (pageHeader.classList.contains('page-header--closed')) {\n//     pageHeader.classList.remove('page-header--closed');\n//     pageHeader.classList.add('page-header--opened');\n//   } else {\n//     pageHeader.classList.add('page-header--closed');\n//     pageHeader.classList.remove('page-header--opened');\n//   }\n// });\n"]}