{"version":3,"sources":["script.js"],"names":["i","ESC_KEYCODE","popup","document","querySelector","close","form","userName","message","isStorageSupport","storage","name","accordion","tel","btnScrollDown","querySelectorAll","scrollDown","onEscPress","evt","keyCode","closeModal","focus","add","overlay","classList","value","addEventListener","reset","remove","getItem","localStorage","err","link","preventDefault","setItem","contains","panel","nextElementSibling","this","toggle","maxHeight","style","scrollHeight"],"mappings":"AAAA,aAEA,IA6BAA,EA7BIC,YAAc,GAIdC,KAAKC,SAAWC,cAAR,gCAERC,MAAQH,SAAME,cAAc,UAE5BE,QAAOJ,SAAME,cAAN,kBACPG,MAAQL,MAAGA,cAAME,iBAEjBI,KAAON,MAAGA,cAAME,QAEhBK,SAAAA,MAAgBL,cAApB,eACIM,IAAAA,MAAUN,cAAA,cACZO,QADYT,MAAAE,cAAA,mBAGZI,kBAAS,EAHXE,QAAA,CAMAC,KAAIC,GACJC,IAAA,GAEAL,QAAIM,IAHAF,UAAYT,SAASY,iBAAiB,cAGtCD,cAAgBX,SAASC,cAAc,gBAE3C,SAASY,cAST,SAASC,WAAWC,GACdA,EAAIC,UAAYlB,aAClBmB,aAaAb,SAAAA,YACAM,MAAIQ,UAAJC,IAAA,cACDC,QAAMC,UAAAF,IAAA,cAENZ,QAAAC,MAJCJ,SAASkB,MAAQf,QAAQC,KAM3BE,IAAIH,SAEFF,SAAQa,QAGTX,QAAAG,KAJCA,IAAIY,MAAQf,QAAQG,IAMtBL,QAAIE,SAAJG,IAAAQ,QAAIX,QAAQF,QAMZL,QAASuB,MAAAA,QAAiBlB,QAG5BD,SAAAc,QAHElB,SAASuB,iBAAiB,UAAWT,YAWrCd,SAAAA,aACDG,KAAAqB,QAHCzB,MAAMsB,UAAUI,OAAO,cAKzBL,QAAIC,UAAAI,OAAA,cACFlB,SAAQC,oBAAoBkB,UAAQZ,YAGrC,IACCR,QAAAA,KAAAA,aAAAoB,QAAA,QACDnB,QAAAG,IAAAiB,aAAAD,QAAA,OAHCnB,QAAQF,QAAUsB,aAAaD,QAAQ,WAKzC,MAAAE,GACEC,kBAAKN,EAuCD,GAvCJM,MAIDA,KAAAN,iBAAA,QAAA,SAAAR,GAHGA,EAAIe,iBAKJ5B,cACFA,OAIDA,MAAAqB,iBAAA,QAAA,SAAAR,GAHGA,EAAIe,iBAKJ3B,eAICA,MACCA,KAAAoB,iBAAIjB,SAAkB,SAAAS,GACpBY,SAAAA,OAAAjB,IAAqBY,MAGtBhB,mBACFqB,aAAAI,QAAA,OAAA3B,SAAAkB,OATHK,aAAAI,QAAA,MAAArB,IAAAY,OAWDK,aAAAI,QAAA,UAAA1B,QAAAiB,QALOK,EAAAA,mBAUJP,SACEH,QAAAA,iBAAU,QAAA,SAAAF,GACXA,EAAAe,iBAJHV,QAAAC,UAAAW,SAAA,eAMDf,eAKKR,UACA,IAAAZ,EAAIoC,EAAAA,EAAQxB,UAAKyB,OAAAA,IAFnBzB,UAAUZ,GAAG0B,iBAAiB,QAAS,WAGrCY,KAAIF,UAAAG,OAAYC,UACdJ,IAAAA,EAAMK,KAAMD,mBADdJ,EAEOK,MAAAD,UACLJ,EAAMK,MAAMD,UAAYJ,KAN5BA,EAAAK,MAAAD,UAAAJ,EAAAM,aAAA,OAcH5B,eADCA,cAAcY,iBAAiB,QAASV","file":"main.min.js","sourcesContent":["'use strict';\n\nvar ESC_KEYCODE = 27;\n\nvar link = document.querySelector('.header__btn--request-a-call');\n\nvar popup = document.querySelector('.modal');\nvar overlay = document.querySelector('.modal-overlay');\nvar close = popup.querySelector('.modal__close');\n\nvar form = popup.querySelector('form');\nvar userName = popup.querySelector('[name=name]');\nvar tel = popup.querySelector('[name=tel]');\nvar message = popup.querySelector('[name=question]');\n\nvar isStorageSupport = true;\nvar storage = {\n  name: '',\n  tel: '',\n  message: ''\n};\n\nvar accordion = document.querySelectorAll(\".accordion\");\nvar i;\n\nvar btnScrollDown = document.querySelector('#scroll_down');\n\nfunction scrollDown() {\n  //\n}\n\n/**\n * Функция для закрытия окна формы по нажатии клавиши Esc.\n * @function\n * @param {Object} evt объект события;\n */\nfunction onEscPress(evt) {\n  if (evt.keyCode === ESC_KEYCODE) {\n    closeModal();\n  }\n}\n\n/**\n * Функция открытия окна формы.\n * @function\n */\nfunction openModal() {\n  popup.classList.add('modal-show');\n  overlay.classList.add('modal-show');\n\n  if (storage.name) {\n    userName.value = storage.name;\n    tel.focus();\n  } else {\n    userName.focus();\n  }\n\n  if (storage.tel) {\n    tel.value = storage.tel;\n    message.focus();\n  } else {\n    tel.focus();\n  }\n\n  if (storage.message) {\n    message.value = storage.message;\n  } else {\n    userName.focus();\n  }\n\n  document.addEventListener('keydown', onEscPress);\n}\n\n/**\n * Функция закрытия окна формы.\n * @function\n */\nfunction closeModal() {\n  form.reset();\n  popup.classList.remove('modal-show');\n  overlay.classList.remove('modal-show');\n  document.removeEventListener('keydown', onEscPress);\n}\n\ntry {\n  storage.name = localStorage.getItem('name');\n  storage.tel = localStorage.getItem('tel');\n  storage.message = localStorage.getItem('message');\n} catch (err) {\n  isStorageSupport = false;\n}\n\nif (link) {\n  link.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    openModal();\n  });\n}\n\nif (close) {\n  close.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    closeModal();\n  });\n}\n\nif (form) {\n  form.addEventListener('submit', function (evt) {\n    if (!userName.value || !tel.value) {\n      evt.preventDefault();\n    } else {\n      if (isStorageSupport) {\n        localStorage.setItem('name', userName.value);\n        localStorage.setItem('tel', tel.value);\n        localStorage.setItem('message', message.value);\n      }\n    }\n  });\n}\n\nif (overlay) {\n  overlay.addEventListener('click', function (evt) {\n    evt.preventDefault();\n    if (overlay.classList.contains('modal-show')) {\n      closeModal();\n    }\n  });\n}\n\nif (accordion) {\n  for (i = 0; i < accordion.length; i++) {\n    accordion[i].addEventListener(\"click\", function () {\n      this.classList.toggle(\"active\");\n      var panel = this.nextElementSibling;\n      if (panel.style.maxHeight) {\n        panel.style.maxHeight = null;\n      } else {\n        panel.style.maxHeight = panel.scrollHeight + \"px\";\n      }\n    });\n  }\n}\n\nif (btnScrollDown) {\n  btnScrollDown.addEventListener('click', scrollDown);\n}\n"]}